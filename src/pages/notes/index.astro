---
import { getCollection } from 'astro:content';
import PageLayout from "../../layouts/PageLayout.astro";
import NoteCard from "../../components/NoteCard.astro";
import NoNotes from "../../components/NoNotes.astro";

const notes = await getCollection('notes', ({ data }) => {
  return data.draft !== true;
});

// Sort notes by publish date (newest first)
notes.sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf());
---

<PageLayout 
  title="Notes - Jorge Teixeira"
  description="Technical notes about cloud engineering, open source, and software development by Jorge Teixeira."
>
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-16 pb-20">
      <header class="mb-12">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
          Notes
        </h1>
        <p class="text-xl text-gray-600">
          Thoughts on cloud engineering, open source, and building resilient systems.
        </p>
      </header>

      {notes.length > 0 ? (
        <div class="grid gap-8">
          {notes.map((note, index) => (
            <NoteCard note={note} showBorder={index < notes.length - 1} />
          ))}
        </div>
      ) : (
        <NoNotes />
      )}
    </div>
</PageLayout>