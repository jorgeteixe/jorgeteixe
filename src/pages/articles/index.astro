---
import { getCollection } from 'astro:content';
import PageLayout from "../../layouts/PageLayout.astro";
import ArticleCard from "../../components/ArticleCard.astro";
import NoArticles from "../../components/NoArticles.astro";

const articles = await getCollection('articles', ({ data }) => {
  return data.draft !== true;
});

// Sort articles by publish date (newest first)
articles.sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf());
---

<PageLayout 
  title="Articles - Jorge Teixeira"
  description="Technical articles about cloud engineering, open source, and software development by Jorge Teixeira."
>
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-16 pb-20">
      <header class="mb-12">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
          Articles
        </h1>
        <p class="text-xl text-gray-600">
          Thoughts on cloud engineering, open source, and building resilient systems.
        </p>
      </header>

      {articles.length > 0 ? (
        <div class="grid gap-8">
          {articles.map((article, index) => (
            <ArticleCard article={article} showBorder={index < articles.length - 1} />
          ))}
        </div>
      ) : (
        <NoArticles />
      )}
    </div>
</PageLayout>